var hideCalendarTimer = new Array();function calendarTimer(a){this.objname=a;this.timers=new Array()}function toggleCalendar(d,a,b){var c=document.getElementById("div_"+d);if(c!=null){if(c.style.visibility=="hidden"){c.style.visibility="visible";document.getElementById(d+"_frame").contentWindow.adjustContainer();if(a){if(b<3000){b=3000}prepareHide(d,b)}}else{c.style.visibility="hidden"}}}function showCalendar(b){var a=document.getElementById("div_"+b);if(a!=null){a.style.visibility="visible";document.getElementById(b+"_frame").contentWindow.adjustContainer()}}function hideCalendar(b){var a=document.getElementById("div_"+b);if(a!=null){a.style.visibility="hidden"}}function prepareHide(e,b){cancelHide(e);var d=setTimeout(function(){hideCalendar(e)},b);var a=false;for(i=0;i<this.hideCalendarTimer.length;i++){if(this.hideCalendarTimer[i].objname==e){a=true;this.hideCalendarTimer[i].timers[this.hideCalendarTimer[i].timers.length]=d}}if(!a){var c=new calendarTimer(e);c.timers[c.timers.length]=d;this.hideCalendarTimer[this.hideCalendarTimer.length]=c}}function cancelHide(b){for(i=0;i<this.hideCalendarTimer.length;i++){if(this.hideCalendarTimer[i].objname==b){var a=this.hideCalendarTimer[i].timers;for(n=0;n<a.length;n++){clearTimeout(a[n])}this.hideCalendarTimer[i].timers=new Array();break}}}function setValue(f,c){var b=(document.getElementById(f).value!=c)?true:false;updateValue(f,c);var e=document.getElementById(f+"_dp").value;if(e){toggleCalendar(f)}checkPairValue(f,c);if(document.getElementById(f+"_och").value!=""&&b){calendar_onchange(f)}var a=document.getElementById(f).value.split("-");tc_submitDate(f,a[2],a[1],a[0])}function updateValue(j,g){document.getElementById(j).value=g;var h=document.getElementById(j+"_dp").value;if(h==true){var f=g.split("-");var e=document.getElementById(j+"_inp").value;if(e==true){document.getElementById(j+"_day").value=padString(f[2].toString(),2,"0");document.getElementById(j+"_month").value=padString(f[1].toString(),2,"0");document.getElementById(j+"_year").value=padString(f[0].toString(),4,"0");tc_updateDay(j,f[0],f[1],f[2])}else{if(f[0]>0&&f[1]>0&&f[2]>0){var b=new Date();b.setFullYear(f[0],(f[1]-1),f[2]);var a=document.getElementById(j+"_fmt").value;var c=b.format(a)}else{var c="Select Date"}document.getElementById("divCalendar_"+j+"_lbl").innerHTML=c}}};function tc_submitDate(objname, dvalue, mvalue, yvalue){var obj = document.getElementById(objname+'_frame');var year_start = document.getElementById(objname+'_year_start').value;var year_end = document.getElementById(objname+'_year_end').value;var dp = document.getElementById(objname+'_dp').value;var da1 = document.getElementById(objname+'_da1').value;var da2 = document.getElementById(objname+'_da2').value;var sna = document.getElementById(objname+'_sna').value;var aut = document.getElementById(objname+'_aut').value;var frm = document.getElementById(objname+'_frm').value;var tar = document.getElementById(objname+'_tar').value;var inp = document.getElementById(objname+'_inp').value;var fmt = document.getElementById(objname+'_fmt').value;var dis = document.getElementById(objname+'_dis').value;var pr1 = document.getElementById(objname+'_pr1').value;var pr2 = document.getElementById(objname+'_pr2').value;var prv = document.getElementById(objname+'_prv').value;var path = document.getElementById(objname+'_pth').value;var spd = document.getElementById(objname+'_spd').value;var spt = document.getElementById(objname+'_spt').value;var och = document.getElementById(objname+'_och').value;var str = document.getElementById(objname+'_str').value;var rtl = document.getElementById(objname+'_rtl').value;var wks = document.getElementById(objname+'_wks').value;	var int = document.getElementById(objname+'_int').value;var hid = document.getElementById(objname+'_hid').value;var hdt = document.getElementById(objname+'_hdt').value;obj.src = path+"calendar_form.php?objname="+objname.toString()+"&selected_day="+dvalue+"&selected_month="+mvalue+"&selected_year="+yvalue+"&year_start="+year_start+"&year_end="+year_end+"&dp="+dp+"&da1="+da1+"&da2="+da2+"&sna="+sna+"&aut="+aut+"&frm="+frm+"&tar="+tar+"&inp="+inp+"&fmt="+fmt+"&dis="+dis+"&pr1="+pr1+"&pr2="+pr2+"&prv="+prv+"&spd="+spd+"&spt="+spt+"&och="+och+"&str="+str+"&rtl="+rtl+"&wks="+wks+"&int="+int+"&hid="+hid+"&hdt="+hdt;obj.contentWindow.submitNow(dvalue, mvalue, yvalue);}function tc_setDMY(f,b,e,c){var a=document.getElementById(f);a.value=c+"-"+e+"-"+b;tc_submitDate(f,b,e,c)}function tc_setDay(f,b){var a=document.getElementById(f);var e=a.value.split("-");if(!isDateAllow(f,b,e[1],e[0])||!checkSpecifyDate(f,b,e[1],e[0])){restoreDate(f)}else{if(isDate(b,e[1],e[0])){tc_setDMY(f,b,e[1],e[0])}else{document.getElementById(f+"_day").selectedIndex=e[2]}}checkPairValue(f,a.value);var c=(document.getElementById(f).value!=d)?true:false;if(document.getElementById(f+"_och").value!=""&&c){calendar_onchange(f)}}function tc_setMonth(f,e){var a=document.getElementById(f);var c=a.value.split("-");if(!isDateAllow(f,c[2],e,c[0])||!checkSpecifyDate(f,c[2],e,c[0])){restoreDate(f)}else{if(document.getElementById(f+"_dp").value&&document.getElementById(f+"_inp").value){c[2]=tc_updateDay(f,c[0],e,c[2])}if(isDate(c[2],e,c[0])){tc_setDMY(f,c[2],e,c[0])}else{document.getElementById(f+"_month").selectedIndex=c[1]}}checkPairValue(f,a.value);var b=(document.getElementById(f).value!=d)?true:false;if(document.getElementById(f+"_och").value!=""&&b){calendar_onchange(f)}};function tc_setYear(f,e){var a=document.getElementById(f);var c=a.value.split("-");if(!isDateAllow(f,c[2],c[1],e)||!checkSpecifyDate(f,c[2],c[1],e)){restoreDate(f)}else{if(document.getElementById(f+"_dp").value&&document.getElementById(f+"_inp").value){c[2]=tc_updateDay(f,e,c[1],c[2])}if(isDate(c[2],c[1],e)){tc_setDMY(f,c[2],c[1],e)}else{document.getElementById(f+"_year").value=c[0]}}checkPairValue(f,a.value);var b=(document.getElementById(f).value!=d)?true:false;if(document.getElementById(f+"_och").value!=""&&b){calendar_onchange(f)}}function yearEnter(b){var a;if(b&&b.which){b=b;a=b.which}else{b=event;a=b.keyCode}if(a==13){return true}else{return false}}var minYear=1900;var maxYear=2100;function isInteger(b){var a;for(a=0;a<b.length;a++){var e=b.charAt(a);if(((e<"0")||(e>"9"))){return false}}return true}function stripCharsInBag(e,f){var b;var a="";for(b=0;b<e.length;b++){var g=e.charAt(b);if(f.indexOf(g)==-1){a+=g}}return a}function is_leapYear(a){return(a%4==0)?!(a%100==0&&a%400!=0):false}function daysInMonth(b,a){var c=new Array(31,28,31,30,31,30,31,31,30,31,30,31);return(b==2&&a>0&&is_leapYear(a))?29:c[b-1]}function isDate(b,c,a){return true};function isDateAllow(b,c,f,d){var i=parseInt(document.getElementById(b+"_da1").value);var h=parseInt(document.getElementById(b+"_da2").value);var j=!isNaN(i);var g=!isNaN(h);c=parseInt(parseFloat(c));f=parseInt(parseFloat(f));d=parseInt(parseFloat(d));if(c>0&&f>0&&d>0){if(j||g){var e=new Date(d,f-1,c);da2Set=e.getTime()/1000;if((!j||da2Set>=i)&&(!g||da2Set<=h)){return true}else{var a=document.getElementById(b+"_fmt").value;if(j){e.setTime(i*1000);da1Str=e.format(a)}if(g){e.setTime(h*1000);da2Str=e.format(a)}if(!j){alert("Please choose a date before "+da2Str)}else{if(!g){alert("Please choose a date after "+da1Str)}else{alert("Please choose a date between\n"+da1Str+" and "+da2Str)}}return false}}}return true};function restoreDate(c){var a=document.getElementById(c).value;var b=a.split("-",3);document.getElementById(c+"_day").value=b[2];document.getElementById(c+"_month").value=b[1];document.getElementById(c+"_year").value=b[0]}Date.prototype.format=function(e){var d="";var c=Date.replaceChars;for(var b=0;b<e.length;b++){var a=e.charAt(b);if(c[a]){d+=c[a].call(this)}else{d+=a}}return d};Date.replaceChars={shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d:function(){return(this.getDate()<10?"0":"")+this.getDate()},D:function(){return Date.replaceChars.shortDays[this.getDay()]},j:function(){return this.getDate()},l:function(){return Date.replaceChars.longDays[this.getDay()]},N:function(){return this.getDay()+1},S:function(){return(this.getDate()%10==1&&this.getDate()!=11?"st":(this.getDate()%10==2&&this.getDate()!=12?"nd":(this.getDate()%10==3&&this.getDate()!=13?"rd":"th")))},w:function(){return this.getDay()},z:function(){return"Not Yet Supported"},W:function(){return"Not Yet Supported"},F:function(){return Date.replaceChars.longMonths[this.getMonth()]},m:function(){return(this.getMonth()<9?"0":"")+(this.getMonth()+1)},M:function(){return Date.replaceChars.shortMonths[this.getMonth()]},n:function(){return this.getMonth()+1},t:function(){return"Not Yet Supported"},L:function(){return"Not Yet Supported"},o:function(){return"Not Supported"},Y:function(){return this.getFullYear()},y:function(){return(""+this.getFullYear()).substr(2)},a:function(){return this.getHours()<12?"am":"pm"},A:function(){return this.getHours()<12?"AM":"PM"},B:function(){return"Not Yet Supported"},g:function(){return this.getHours()%12||12},G:function(){return this.getHours()},h:function(){return((this.getHours()%12||12)<10?"0":"")+(this.getHours()%12||12)},H:function(){return(this.getHours()<10?"0":"")+this.getHours()},i:function(){return(this.getMinutes()<10?"0":"")+this.getMinutes()},s:function(){return(this.getSeconds()<10?"0":"")+this.getSeconds()},e:function(){return"Not Yet Supported"},I:function(){return"Not Supported"},O:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+(Math.abs(this.getTimezoneOffset()/60))+"00"},T:function(){var b=this.getMonth();this.setMonth(0);var a=this.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1");this.setMonth(b);return a},Z:function(){return -this.getTimezoneOffset()*60},c:function(){return"Not Yet Supported"},r:function(){return this.toString()},U:function(){return this.getTime()/1000}};function padString(c,b,a){if(c.length<b){while(c.length<b){c=a+c}}else{}return c}function tc_updateDay(h,g,f,c){var e=(f>0&&g>0)?daysInMonth(f,g):((f>0)?daysInMonth(f,2008):31);var a=document.getElementById(h+"_day");if(a.options[0].value==0||a.options[0].value==""){a.length=1}else{a.length=0}for(d=1;d<=e;d++){var b=document.createElement("OPTION");b.text=d;b.value=d;a.options[d]=new Option(b.text,padString(b.value,2,"0"))}if(c>e){a.value=padString(e,2,"0")}else{a.value=padString(c,2,"0")}return a.value}function checkPairValue(e,j){var k=document.getElementById(e+"_pr1").value;var h=document.getElementById(e+"_pr2").value;var a=document.getElementById(e).value;var f=a.split("-");var l=new Date(f[0],f[1]-1,f[2]).getTime()/1000;if(k!=""&&document.getElementById(k)!=null){document.getElementById(k+"_prv").value=j;var m=document.getElementById(k).value;var o=m.split("-");var n=new Date(o[0],o[1]-1,o[2]).getTime()/1000;if(l<n){document.getElementById(e+"_prv").value="";tc_submitDate(k,"00","00","0000")}else{tc_submitDate(k,o[2],o[1],o[0])}}if(h!=""&&document.getElementById(h)!=null){document.getElementById(h+"_prv").value=j;var c=document.getElementById(h).value;var g=c.split("-");var b=new Date(g[0],g[1]-1,g[2]).getTime()/1000;if(l>b){document.getElementById(e+"_prv").value="";tc_submitDate(h,"00","00","0000")}else{tc_submitDate(h,g[2],g[1],g[0])}}}function checkSpecifyDate(a,b,j,c){var l=document.getElementById(a+"_spd").value;var o=document.getElementById(a+"_spt").value;var e;if(typeof(JSON)!="undefined"){e=JSON.parse(l)}else{if(l!=""&&l.length>2){var k=l.substring(2,l.length-2);var e=k.split("],[");for(i=0;i<e.length;i++){var h=e[i];if(h==""){e[i]=new Array()}else{e[i]=h.split(",")}}}else{e=new Array()}}var n=false;for(var m in e[2]){if(e[2].hasOwnProperty(m)){this_date=new Date(e[2][m]*1000);if(this_date.getDate()==parseInt(parseFloat(b))&&(this_date.getMonth()+1)==parseInt(parseFloat(j))){n=true;break}}}if(!n){for(var m in e[1]){if(e[1].hasOwnProperty(m)){this_date=new Date(e[1][m]*1000);if(this_date.getDate()==parseInt(parseFloat(b))){n=true;break}}}}if(!n){var g=new Date(c,j-1,b);var f=g.getTime()/1000;for(var m in e[0]){if(e[0].hasOwnProperty(m)){if(f==e[0][m]){n=true;break}}}}switch(o){case 0:default:if(n){alert("You cannot choose this date");return false}break;case 1:if(!n){alert("You cannot choose this date");return false}break}return true}function urldecode(a){return decodeURIComponent((a+"").replace(/\+/g,"%20"))}function calendar_onchange(objname){var fc=document.getElementById(objname+"_och").value;eval(urldecode(fc))}function focusCalendar(b){var a=document.getElementById("container_"+b);if(a!=null){a.style.zIndex=999}}function unFocusCalendar(c,b){var a=document.getElementById("container_"+c);if(a!=null){a.style.zIndex=b}};